<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hello World</title>

<!-- Bootstrap -->
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet">
<link href="styles.css" rel="stylesheet">
</head>

<body>
	<div class="container">
		<h1>Welcome DDBMS.</h1>
		<div id="nameInput" class="input-group-lg center-block helloInput">
			<p class="lead">What is your name?</p>
			<input id="user_name1" type="text" class="form-control"
				placeholder="name" aria-describedby="sizing-addon1" value="" />
		</div>
		<p id="response" class="lead text-center"></p>

		<p id="databaseNames" class="lead text-center"></p>
	</div>
	<div class="information">
		<h3>Information about the customer</h3>
		<table style="width: 100%">
			<tr>
				<th>W_ID</th>
				<td><input id="wid" type="text" name="wid"></td>
			</tr>
			<tr>
				<th>D_ID</th>
				<td><input id="did" type="text" name="did"></td>

			</tr>
			<tr>
				<th>C_ID</th>
				<td><input id="cid" type="text" name="cid"></td>
			</tr>

		</table>
		<button onclick="myFunction()">Click me</button>
	</div>
	
	<!-- <div class="orderLine">
		<h3>Information about the customer</h3>
		<table style="width: 100%">
			<tr>
				<th>I_ID</th>
				<td><input id="iid1" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid1" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt1" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid2" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid2" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt2" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid3" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid3" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt3" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid4" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid4" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt4" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid5" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid5" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt5" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid6" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid6" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt6" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid7" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid7" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt7" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid8" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid8" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt8" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid9" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid9" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt9" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid10" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid10" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt10" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid11" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid11" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt11" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid12" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid12" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt12" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid13" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid13" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt13" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid14" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid14" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt14" type="text" name="did"></td>	
			</tr>
			<tr>
				<th>I_ID</th>
				<td><input id="iid15" type="text" name="wid"></td>
				<th>W_ID</th>
				<td><input id="wid15" type="text" name="did"></td>
				<th>COUNT</th>
				<td><input id="cnt15" type="text" name="did"></td>	
			</tr>
			
		</table>
		<button onclick="myFunction()">Click me</button>
	</div> -->
	
	
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="antixss.js" type="text/javascript"></script>
	<a href="test.html">Test HTML</a>
	<br>
	<script>
	function myFunction() {
		var wid = document.getElementById("wid").value;
		var did = document.getElementById("did").value;
		var cid = document.getElementById("cid").value;
		alert("Here"+wid);
	}
		
	
	
	//Submit data when enter key is pressed
    $('#wid').keydown(function(e) {
    	var wid = $('#wid').val();
    	var did = $('#cid').val();
		var cid = $('#did').val();
		
        if (e.which == 13 && wid.length > 0) { //catch Enter key
            $('#nameInput').hide();
       		$('#response').html("loading...");
        	//POST request to API to create a new visitor entry in the database
            $.ajax({
			  method: "POST",
			  url: "./api/items",
			  contentType: "application/json",
			  data: JSON.stringify({name: wid+','+cid+','+did })
			})
            .done(function(data) {	
                $('#response').html(AntiXSS.sanitizeInput(data));
                getNames();
            });
        }
    });
	
    	/* //Submit data when enter key is pressed
        $('#user_name1').keydown(function(e) {
        	var name = $('#user_name1').val();
            if (e.which == 13 && name.length > 0) { //catch Enter key
                $('#nameInput').hide();
           		$('#response').html("loading...");
            	//POST request to API to create a new visitor entry in the database
                $.ajax({
				  method: "POST",
				  url: "./api/visitors",
				  contentType: "application/json",
				  data: JSON.stringify({name: name })
				})
                .done(function(data) {	
                    $('#response').html(AntiXSS.sanitizeInput(data));
                    getNames();
                });
            }
        }); */
        
        //Retreive all the visitors from the database
        function getNames(){
          $.get("./api/items")
              .done(function(data) {
                  if(data.length > 0) {
                    data.forEach(function(element, index) {
                      data[index] = AntiXSS.sanitizeInput(element)
                    });
                    $('#databaseNames').html("Database contents: " + JSON.stringify(data));
                  }
              });
          }
          
          //Call getNames on page load.
          getNames();
          
          
    </script>
</body>

</html>
